<div class="modern-login">
  <div class="login-background">
    <div class="bg-shapes">
      <div class="shape-server"></div>
      <div class="shape-circuit"></div>
      <div class="shape-chip"></div>
      <div class="shape-network"></div>
    </div>
  </div>

  <div class="login-container">
    <div class="login-card">
      <div class="login-header">
        <div class="logo-container">
          <div class="logo-icon">
            <i class="fas fa-server"></i>
          </div>
          <div class="logo-text">
            <h1>AssetTrack</h1>
            <p>IT Asset Management System</p>
          </div>
        </div>
      </div>

      <% if (typeof error !== 'undefined' && error) { %>
        <div class="alert alert-danger modern-alert">
          <i class="fas fa-exclamation-triangle"></i>
          <span><%= error %></span>
        </div>
      <% } %>

      <form id="loginForm" method="POST" action="/auth/login" data-no-ajax class="modern-form">
        <div class="form-group">
          <label for="email">Email Address</label>
          <div class="input-container">
            <i class="fas fa-envelope input-icon"></i>
            <input type="email" id="email" name="email" class="form-input"
                   value="<%= locals.email || '' %>" required autofocus
                   placeholder="Enter your email">
            <div class="input-underline"></div>
          </div>
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <div class="input-container">
            <i class="fas fa-lock input-icon"></i>
            <input type="password" id="password" name="password" class="form-input"
                   required placeholder="Enter your password">
            <button type="button" class="password-toggle" onclick="togglePassword()">
              <i class="fas fa-eye" id="passwordToggleIcon"></i>
            </button>
            <div class="input-underline"></div>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn-login">
            <span class="btn-text">Sign In</span>
            <div class="btn-loader" style="display: none;">
              <div class="spinner"></div>
            </div>
          </button>
        </div>
      </form>

      <div class="login-footer">
        <div class="footer-links">
          <a href="#" class="link-forgot">Forgot Password?</a>
        </div>
        <div class="footer-info">
          <p>Don't have an account? Contact your system administrator.</p>
          <p class="version">
            <i class="fas fa-shield-alt"></i>
            Secure Login â€¢ v2.0.0
          </p>
        </div>
      </div>
    </div>

    <div class="login-side-panel">
      <div class="panel-content">
        <div class="feature-highlights">
          <div class="highlight-item">
            <i class="fas fa-shield-alt"></i>
            <span>Enterprise Security</span>
          </div>
          <div class="highlight-item">
            <i class="fas fa-network-wired"></i>
            <span>Network Monitoring</span>
          </div>
          <div class="highlight-item">
            <i class="fas fa-server"></i>
            <span>Asset Tracking</span>
          </div>
          <div class="highlight-item">
            <i class="fas fa-chart-line"></i>
            <span>Real-time Analytics</span>
          </div>
        </div>

        <div class="system-stats">
          <div class="stat-display">
            <div class="stat-item">
              <span class="stat-label">System Status</span>
              <span class="stat-value online">ONLINE</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Uptime</span>
              <span class="stat-value">99.98%</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Assets Monitored</span>
              <span class="stat-value">1,247</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
function togglePassword() {
  const passwordInput = document.getElementById('password');
  const toggleIcon = document.getElementById('passwordToggleIcon');

  if (passwordInput.type === 'password') {
    passwordInput.type = 'text';
    toggleIcon.className = 'fas fa-eye-slash';
  } else {
    passwordInput.type = 'password';
    toggleIcon.className = 'fas fa-eye';
  }
}

// Form submission with loading state
document.getElementById('loginForm').addEventListener('submit', function(e) {
  const submitBtn = document.querySelector('.btn-login');
  const btnText = document.querySelector('.btn-text');
  const btnLoader = document.querySelector('.btn-loader');

  submitBtn.disabled = true;
  btnText.style.display = 'none';
  btnLoader.style.display = 'block';

  // Re-enable after 5 seconds in case of issues
  setTimeout(() => {
    submitBtn.disabled = false;
    btnText.style.display = 'block';
    btnLoader.style.display = 'none';
  }, 5000);
});

// IT-themed background animations
document.addEventListener('DOMContentLoaded', function() {
  const shapes = document.querySelectorAll('.bg-shapes > div');
  shapes.forEach((shape, index) => {
    shape.style.animationDelay = `${index * 0.5}s`;
  });

  // Simulate real-time data updates
  setInterval(() => {
    const uptimeElement = document.querySelector('.stat-value:not(.online)');
    if (uptimeElement && uptimeElement.textContent.includes('%')) {
      const currentUptime = parseFloat(uptimeElement.textContent);
      const newUptime = (currentUptime + Math.random() * 0.01).toFixed(2);
      uptimeElement.textContent = newUptime + '%';
    }
  }, 5000);
});
</script>
