<div class="container mx-auto px-4 py-8">
  <div class="max-w-3xl mx-auto bg-white dark:bg-gray-800 rounded-lg shadow p-8">
    <h1 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-6 flex items-center gap-2">
      <i class="fas fa-building"></i>
      <%= department.name %> Department
    </h1>

    <div class="mb-8">
      <h2 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2">
        <i class="fas fa-users"></i> Employees
      </h2>
      <% if (employees && employees.length > 0) { %>
        <div class="overflow-x-auto rounded-lg shadow">
          <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800">
            <thead class="bg-gray-50 dark:bg-gray-900">
              <tr>
                <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Name</th>
                <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">ID</th>
                <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Email</th>
                <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Platform</th>
                <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Actions</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
              <% employees.forEach(employee => { %>
                <tr>
                  <td class="px-4 py-3">
                    <a href="/employees/<%= employee.id %>" class="font-semibold text-blue-700 dark:text-blue-300 hover:underline">
                      <%= employee.name %>
                    </a>
                  </td>
                  <td class="px-4 py-3 font-mono text-xs text-gray-700 dark:text-gray-300"><%= employee.cep %></td>
                  <td class="px-4 py-3">
                    <a href="mailto:<%= employee.email %>" class="text-gray-700 dark:text-gray-200 hover:underline"><%= employee.email %></a>
                  </td>
                  <td class="px-4 py-3 text-gray-600 dark:text-gray-400"><%= employee.platform_name || 'N/A' %></td>
                  <td class="px-4 py-3">
                    <a href="/employees/<%= employee.id %>" class="inline-flex items-center px-2 py-1 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100 rounded transition" title="View Employee">
                      <i class="fas fa-eye"></i>
                    </a>
                  </td>
                </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
      <% } else { %>
        <div class="flex flex-col items-center justify-center py-8 text-center border border-dashed border-blue-400 rounded bg-blue-50 dark:bg-blue-950">
          <div class="text-3xl text-blue-500 mb-2">
            <i class="fas fa-user-slash"></i>
          </div>
          <p class="text-gray-500 dark:text-gray-400">No employees in this department.</p>
        </div>
      <% } %>
    </div>

    <div class="flex flex-wrap gap-2 mt-8">
      <a href="/departments" class="inline-flex items-center px-4 py-2 bg-gray-300 dark:bg-gray-700 hover:bg-gray-400 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100 font-semibold rounded-md transition">
        <i class="fas fa-arrow-left mr-2"></i> Back to Departments
      </a>
      <a href="/departments/<%= department.id %>/edit" class="inline-flex items-center px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold rounded-md transition">
        <i class="fas fa-edit mr-2"></i> Edit Department
      </a>
      <form style="display: inline;" method="POST" action="/departments/<%= department.id %>/delete" onsubmit="return confirmDelete('<%= department.name %>');">
        <button type="submit" class="inline-flex items-center px-4 py-2 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-md transition">
          <i class="fas fa-trash mr-2"></i> Delete Department
        </button>
      </form>
    </div>
  </div>
</div>

<script>
function confirmDelete(departmentName) {
  return confirm(`Are you sure you want to delete the department "${departmentName}"? This action cannot be undone.`);
}
</script>
